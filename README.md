# bucket-module


## Usage
Here is a example of what is needed to create a bucket 
```hcl-terraform
module "test_bucket" {
  source = "http://terraform-modules.skypicker.com.s3.amazonaws.com/gcp-bucket/dev/gcp-bucket.zip"

  bucket_name   = "test-bucket"     #base name, random suffix will be added and depending on labels other suffixes
  location      = var.GOOGLE_REGION #this will set location of bucket to project location

  labels = {
    tribe   = "platform" 
    env     = "sandbox" # can be sandbox of production
    public  = "no"      # yes or no
  }

  expiration_rule = {   # expiration policy in days
    delete  = true
    days    = 365
  }

}
```
## Editable variables

* `bucket_name` (string)
    * Base name of bucket. Final bucket name is generated by adding a random suffix and depends on labels (-sandbox and/or -public)
    * Module enforces validation that string length must be > 3 and < 39, this is to ensure that final bucket name doesn't exceeded google [limitation](https://cloud.google.com/storage/docs/naming-buckets)

* `location` (string)   
    * Location of bucket, by using var.GOOGLE_REGION bucket will be created in same region as host google project.
    * If you need to create in a different [location](https://cloud.google.com/storage/docs/locations) set it here.

* `storage_class` (string)  
    * Set the [storage class](https://cloud.google.com/storage/docs/storage-classes) of your bucket
    * If not set, default is: STANDARD
    * Available options are STANDARD,NEARLINE,COLDLINE,ARCHIVE,MULTI_REGIONAL,REGIONAL
    
    

```hcl-terraform
  members_storage_admin = [
    "user:random.user@kiwi.com",
    "user:another.one@kiwi.com",
  ]
  members_object_creator = [
    "service.account:something@platform-sandbox-6b6f7700.iam.gserviceaccount.com ",
  ]

  conversion_rule = [
    {
      storage_class = "NEARLINE"
      days = 90
    },
    {
      storage_class = "ARCHIVE"
      days = 180
    }
```